<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generar Evento en Calendario</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        h1 {
            color: #333;
        }
        .gear {
            margin-top: 30px;
            font-size: 3em;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h1>Creando evento...</h1>
    
    <!-- Engranaje animado -->
    <div id="gear" class="gear">⚙️</div>

    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script>
        // Esta función genera el evento y lo descarga automáticamente
        function generateEvent() {
            const today = new Date();
            const nextMonth = new Date(today.setMonth(today.getMonth() + 1));
            const startDate = nextMonth.toISOString().replace(/[-:]/g, '').split('.')[0];
            const endDate = new Date(nextMonth.setHours(nextMonth.getHours() + 2)).toISOString().replace(/[-:]/g, '').split('.')[0];

            const icsContent = `
BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
SUMMARY:PASAR DIARIO
DTSTART:${startDate}
DTEND:${endDate}
DESCRIPTION:Descripción del evento
LOCATION:Ubicación del evento
END:VEVENT
END:VCALENDAR
`;

            const blob = new Blob([icsContent], { type: 'text/calendar' });
            const url = URL.createObjectURL(blob);

            // Redirigir automáticamente al enlace de descarga
            const link = document.createElement('a');
            link.href = url;
            link.download = 'evento_en_un_mes.ics';
            link.click();

            // Cerrar la ventana emergente después de 2 segundos
            setTimeout(() => {
                window.close();
            }, 2000);
        }

        // Ejecutar la generación de evento al cargar la página
        window.onload = function() {
            generateEvent();
        }
    </script>
</body>
</html>
